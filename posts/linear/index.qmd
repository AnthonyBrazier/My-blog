---
title: "Atividade 3 - Regressão Linear"
author: "Anthony Brazier Leite"
date: "2025-11-23"
categories: [LINEAR, PYTHON, CODE, GRÁFICO]
image: "grafico.png"
jupyter: python3
---

Neste Post eu mostro uma forma em *python* para calcular a regressão linar de x e y.


```{python}
import os
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from plotnine import ggplot, aes, geom_point, geom_abline, ggsave
from IPython.display import Image, display

# Caminhos dos arquivos
X_path = "/mnt/data/X.txt"
y_path = "/mnt/data/y.txt"

print("CWD:", os.getcwd())
print("X.txt exists:", os.path.exists(X_path))
print("y.txt exists:", os.path.exists(y_path))

# Leitura dos dados 
if os.path.exists(X_path) and os.path.exists(y_path):

   
    X_path = os.path.join(os.getcwd(), 'X.txt')
    y_path = os.path.join(os.getcwd(), 'y.txt')

    print('CWD:', os.getcwd())
    print('X.txt exists:', os.path.exists(X_path))
    print('y.txt exists:', os.path.exists(y_path))

    # Carregar dados 
    
    if os.path.exists(X_path) and os.path.exists(y_path):
        X = np.loadtxt(X_path)
        y = np.loadtxt(y_path)
    else:
        print('Arquivos não encontrados — usando valores constantes fornecidos.')
        X = np.full(50, 4.6317925681770316)
        y = np.full_like(X, 12439.153947498304)

    X = np.asarray(X).ravel()
    y = np.asarray(y).ravel()

    print('shapes:', X.shape, y.shape)

    # Estima regressão

    if np.isclose(np.var(X), 0):
        intercepto = float(np.mean(y))
        inclinacao = 0.0
    else:
        X_mat = np.vstack([np.ones_like(X), X]).T
        beta = np.linalg.lstsq(X_mat, y, rcond=None)[0]
        intercepto, inclinacao = float(beta[0]), float(beta[1])

    # Plot com matplotlib

    df = pd.DataFrame({'x': X, 'y': y})
    fig, ax = plt.subplots(figsize=(8, 4.5))
    ax.scatter(df['x'], df['y'], color='tab:blue', label='Dados')
    x_line = np.linspace(df['x'].min(), df['x'].max(), 200)
    ax.plot(x_line, intercepto + inclinacao * x_line, color='red', label='Ajuste linear')
    ax.set_xlabel('x')
    ax.set_ylabel('y')
    ax.legend()
    fig.tight_layout()
    fig.savefig('grafico_regressao.png', dpi=150)
    display(Image('grafico_regressao.png'))

    print(f'Intercepto: {intercepto:.4f}')
    print(f'Inclinação: {inclinacao:.4f}')
    ```
![Gráfico de regressão](grafico.png)